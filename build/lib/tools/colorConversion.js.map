{
  "version": 3,
  "sources": ["../../../src/lib/tools/colorConversion.ts"],
  "sourcesContent": ["/**\n * Converts RGB values to HSL.\n * Returns hue in degrees (0-360), saturation and lightness in percent (0-100).\n */\nexport function rgbToHsl(rgb: { r: number; g: number; b: number }): {\n        hue: number;\n        saturation: number;\n        lightness: number;\n} {\n        const r = Math.max(0, Math.min(255, rgb.r)) / 255;\n        const g = Math.max(0, Math.min(255, rgb.g)) / 255;\n        const b = Math.max(0, Math.min(255, rgb.b)) / 255;\n\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        let h = 0;\n        let s = 0;\n        const l = (max + min) / 2;\n\n        if (max !== min) {\n                const d = max - min;\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                switch (max) {\n                        case r:\n                                h = (g - b) / d + (g < b ? 6 : 0);\n                                break;\n                        case g:\n                                h = (b - r) / d + 2;\n                                break;\n                        case b:\n                                h = (r - g) / d + 4;\n                                break;\n                }\n                h /= 6;\n        }\n\n        return {\n                hue: Math.round(h * 360),\n                saturation: Math.round(s * 100),\n                lightness: Math.round(l * 100),\n        };\n}\n\n/**\n * Converts HSL values (hue 0-360, saturation and lightness 0-100) to RGB (0-255).\n */\nexport function hslToRgb(hue: number, saturation: number, lightness: number): {\n        r: number;\n        g: number;\n        b: number;\n} {\n        const h = ((hue % 360) + 360) % 360 / 360;\n        const s = Math.max(0, Math.min(100, saturation)) / 100;\n        const l = Math.max(0, Math.min(100, lightness)) / 100;\n\n        if (s === 0) {\n                const val = Math.round(l * 255);\n                return { r: val, g: val, b: val };\n        }\n\n        const hueToRgb = (p: number, q: number, t: number): number => {\n                if (t < 0) t += 1;\n                if (t > 1) t -= 1;\n                if (t < 1 / 6) return p + (q - p) * 6 * t;\n                if (t < 1 / 2) return q;\n                if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n                return p;\n        };\n\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const p = 2 * l - q;\n\n        const r = hueToRgb(p, q, h + 1 / 3);\n        const g = hueToRgb(p, q, h);\n        const b = hueToRgb(p, q, h - 1 / 3);\n\n        return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };\n}\n\n/**\n * Converts a color temperature value in Kelvin to mired (micro reciprocal degrees).\n */\nexport function kelvinToMired(kelvin: number): number {\n        const mired = Math.round(1000000 / Math.max(1, kelvin));\n        return clampMired(mired);\n}\n\n/**\n * Converts a color temperature value in mired (micro reciprocal degrees) to Kelvin.\n */\nexport function miredToKelvin(mired: number): number {\n        const clampedMired = clampMired(mired);\n        return Math.round(1000000 / Math.max(1, clampedMired));\n}\n\nconst MIRED_MIN = 140;\nconst MIRED_MAX = 600;\n\n/**\n * Clamp mired values to the supported HomeKit range to avoid runaway conversions.\n */\nfunction clampMired(mired: number): number {\n        if (!Number.isFinite(mired)) {\n                return MIRED_MIN;\n        }\n        return Math.max(MIRED_MIN, Math.min(MIRED_MAX, Math.round(mired)));\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIO,SAAS,SAAS,KAIvB;AACM,QAAM,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,IAAI,CAAC,CAAC,IAAI;AAC9C,QAAM,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,IAAI,CAAC,CAAC,IAAI;AAC9C,QAAM,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,IAAI,CAAC,CAAC,IAAI;AAE9C,QAAM,MAAM,KAAK,IAAI,GAAG,GAAG,CAAC;AAC5B,QAAM,MAAM,KAAK,IAAI,GAAG,GAAG,CAAC;AAC5B,MAAI,IAAI;AACR,MAAI,IAAI;AACR,QAAM,KAAK,MAAM,OAAO;AAExB,MAAI,QAAQ,KAAK;AACT,UAAM,IAAI,MAAM;AAChB,QAAI,IAAI,MAAM,KAAK,IAAI,MAAM,OAAO,KAAK,MAAM;AAC/C,YAAQ,KAAK;AAAA,MACL,KAAK;AACG,aAAK,IAAI,KAAK,KAAK,IAAI,IAAI,IAAI;AAC/B;AAAA,MACR,KAAK;AACG,aAAK,IAAI,KAAK,IAAI;AAClB;AAAA,MACR,KAAK;AACG,aAAK,IAAI,KAAK,IAAI;AAClB;AAAA,IAChB;AACA,SAAK;AAAA,EACb;AAEA,SAAO;AAAA,IACC,KAAK,KAAK,MAAM,IAAI,GAAG;AAAA,IACvB,YAAY,KAAK,MAAM,IAAI,GAAG;AAAA,IAC9B,WAAW,KAAK,MAAM,IAAI,GAAG;AAAA,EACrC;AACR;AAKO,SAAS,SAAS,KAAa,YAAoB,WAIxD;AACM,QAAM,KAAM,MAAM,MAAO,OAAO,MAAM;AACtC,QAAM,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,UAAU,CAAC,IAAI;AACnD,QAAM,IAAI,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,SAAS,CAAC,IAAI;AAElD,MAAI,MAAM,GAAG;AACL,UAAM,MAAM,KAAK,MAAM,IAAI,GAAG;AAC9B,WAAO,EAAE,GAAG,KAAK,GAAG,KAAK,GAAG,IAAI;AAAA,EACxC;AAEA,QAAM,WAAW,CAACA,IAAWC,IAAW,MAAsB;AACtD,QAAI,IAAI,EAAG,MAAK;AAChB,QAAI,IAAI,EAAG,MAAK;AAChB,QAAI,IAAI,IAAI,EAAG,QAAOD,MAAKC,KAAID,MAAK,IAAI;AACxC,QAAI,IAAI,IAAI,EAAG,QAAOC;AACtB,QAAI,IAAI,IAAI,EAAG,QAAOD,MAAKC,KAAID,OAAM,IAAI,IAAI,KAAK;AAClD,WAAOA;AAAA,EACf;AAEA,QAAM,IAAI,IAAI,MAAM,KAAK,IAAI,KAAK,IAAI,IAAI,IAAI;AAC9C,QAAM,IAAI,IAAI,IAAI;AAElB,QAAM,IAAI,SAAS,GAAG,GAAG,IAAI,IAAI,CAAC;AAClC,QAAM,IAAI,SAAS,GAAG,GAAG,CAAC;AAC1B,QAAM,IAAI,SAAS,GAAG,GAAG,IAAI,IAAI,CAAC;AAElC,SAAO,EAAE,GAAG,KAAK,MAAM,IAAI,GAAG,GAAG,GAAG,KAAK,MAAM,IAAI,GAAG,GAAG,GAAG,KAAK,MAAM,IAAI,GAAG,EAAE;AACxF;AAKO,SAAS,cAAc,QAAwB;AAC9C,QAAM,QAAQ,KAAK,MAAM,MAAU,KAAK,IAAI,GAAG,MAAM,CAAC;AACtD,SAAO,WAAW,KAAK;AAC/B;AAKO,SAAS,cAAc,OAAuB;AAC7C,QAAM,eAAe,WAAW,KAAK;AACrC,SAAO,KAAK,MAAM,MAAU,KAAK,IAAI,GAAG,YAAY,CAAC;AAC7D;AAEA,MAAM,YAAY;AAClB,MAAM,YAAY;AAKlB,SAAS,WAAW,OAAuB;AACnC,MAAI,CAAC,OAAO,SAAS,KAAK,GAAG;AACrB,WAAO;AAAA,EACf;AACA,SAAO,KAAK,IAAI,WAAW,KAAK,IAAI,WAAW,KAAK,MAAM,KAAK,CAAC,CAAC;AACzE;",
  "names": ["p", "q"]
}
